FONT: https://www.freecodecamp.org/news/javascript-lexical-scope-tutorial/

El terme "√†mbit l√®xic" pot semblar complicat d'entendre a primera vista. Per√≤ √©s √∫til comprendre qu√® significa cada paraula.

Aix√≠ doncs, aquest article explicar√† l'√†mbit l√®xic examinant primer el significat de "l√®xic" i "√†mbit".

Aix√≠ que comencem per entendre el terme "√†mbit".

## Qu√® √©s exactament l'√Ämbit?

L'√†mbit es refereix a l'√†rea on un element (com ara una funci√≥ o variable) √©s visible i accessible per a altres codi.

**Nota:**

- **√Ämbit** significa √†rea, espai o regi√≥.
- **√Ämbit global** significa espai global o espai p√∫blic.
- **√Ämbit local** significa una regi√≥ local o una regi√≥ restringida.

Aqu√≠ teniu un exemple:

```javascript
// Define a variable in the global scope:
const fullName = "Oluwatobi Sofela";

// Define nested functions:
function profile() {
  function sayName() {
    function writeName() {
      return fullName;
    }
    return writeName();
  }
  return sayName();
}
```

[Proveu-ho a StackBlitz](https://stackblitz.com)

En el fragment de codi anterior, hem definit la variable `fullName` en l'√†mbit global. Aix√≤ vol dir que √©s visible i accessible globalment per tot el codi dins del script.

Per√≤ hem definit `writeName()` dins de la funci√≥ `sayName()`, aix√≠ que est√† localment en l'√†mbit de `sayName()`.

En altres paraules, `writeName()` √©s visible i accessible localment nom√©s pel codi dins de la funci√≥ `sayName()`.

Tingueu en compte que sempre que s'invoca la funci√≥ `writeName()`, l'ordinador no anir√† directament a l'√†mbit global per cridar la variable `fullName`. En canvi, ha d'anar seq√ºencialment a trav√©s de la cadena d'√†mbits per buscar `fullName`.

## Qu√® √©s una Cadena d'√Ämbits?

Una cadena d'√†mbits es refereix als espais √∫nics que existeixen des de l'√†mbit on es crida una variable fins a l'√†mbit global.

Aqu√≠ teniu un exemple:

```javascript
// Define a variable in the global scope:
const fullName = "Oluwatobi Sofela";

// Define nested functions:
function profile() {
  function sayName() {
    function writeName() {
      return fullName;
    }
    return writeName();
  }
  return sayName();
}
```

En el fragment de codi anterior, observeu que la variable `fullName` es crida des de l'√†mbit de la funci√≥ `writeName()`.

Per tant, la cadena d'√†mbits que existeix des de la crida de la variable fins a l'√†mbit global √©s:

```
writeName() scope ---> sayName() scope ---> profile() scope ---> global scope
```

En altres paraules, hi ha quatre (4) espais des de l'√†mbit d'invocaci√≥ de `fullName` fins al seu √†mbit l√®xic (l'√†mbit global en aquest cas).

**Nota:** L'√†mbit global √©s l'√∫ltim enlla√ß en la cadena d'√†mbits de JavaScript.

## Com Funciona la Cadena d'√Ämbits?

La cadena d'√†mbits de JavaScript determina la jerarquia de llocs pels quals l'ordinador ha de passar ‚Äî un darrere l'altre ‚Äî per trobar l'√†mbit l√®xic (origen) de la variable espec√≠fica que s'ha cridat.

Per exemple, considereu el codi seg√ºent:

```javascript
// Define a variable in the global scope:
const fullName = "Oluwatobi Sofela";

// Define nested functions:
function profile() {
  function sayName() {
    function writeName() {
      return fullName;
    }
    return writeName();
  }
  return sayName();
}
```

En el fragment de codi anterior, sempre que es crida la funci√≥ `profile()`, l'ordinador primer invocar√† la funci√≥ `sayName()` (que √©s l'√∫nic codi dins de la funci√≥ `profile()`).

En segon lloc, l'ordinador invocar√† la funci√≥ `writeName()` (que √©s l'√∫nic codi dins de la funci√≥ `sayName()`).

En aquest punt, com que el codi a `writeName()` instrueix l'ordinador a cridar i retornar el contingut de la variable `fullName`, l'ordinador cridar√† `fullName`. Per√≤ no anir√† directament a l'√†mbit global per cridar `fullName`.

En canvi, l'ordinador ha d'anar pas a pas a trav√©s de la cadena d'√†mbits per buscar l'√†mbit l√®xic de `fullName`.

Aix√≠ doncs, aqu√≠ teniu els passos seq√ºencials que l'ordinador ha de seguir per localitzar l'√†mbit l√®xic de `fullName`:

1. **Primer**, l'ordinador comprovar√† si `fullName` est√† definit localment dins de la funci√≥ `writeName()`. Per√≤ no trobar√† cap definici√≥ de `fullName` all√†, aix√≠ que puja al seg√ºent √†mbit per continuar la recerca.
2. **Segon**, l'ordinador buscar√† la definici√≥ de `fullName` a `sayName()` (el seg√ºent espai en la cadena d'√†mbits). Encara no el troba all√†, aix√≠ que puja a l'√†mbit seg√ºent.
3. **Tercer**, l'ordinador buscar√† la definici√≥ de `fullName` a la funci√≥ `profile()`. Encara aix√≠, no troba `fullName` all√†. Aix√≠ que l'ordinador continua per buscar l'√†mbit l√®xic de `fullName` en la seg√ºent regi√≥ de la cadena d'√†mbits.
4. **Quart**, l'ordinador va a l'√†mbit global (l'√†mbit seg√ºent despr√©s de `profile()`). Afortunadament, hi troba la definici√≥ de `fullName`! Per tant, obt√© el seu contingut (`"Oluwatobi Sofela"`) i el retorna.

## √âs Hora de Practicar amb l'√Ämbit ü§∏‚Äç‚ôÇÔ∏èüèãÔ∏è‚Äç‚ôÄÔ∏èüèä‚Äç‚ôÄÔ∏è

Considereu el script seg√ºent. Quina de les tres variables `fullName` cridar√† l'ordinador?

```javascript
// First fullName variable defined in the global scope:
const fullName = "Oluwatobi Sofela";

// Nested functions containing two more fullName variables:
function profile() {
  const fullName = "Tobi Sho";
  function sayName() {
    const fullName = "Oluwa Sofe";
    function writeName() {
      return fullName;
    }
    return writeName();
  }
  return sayName();
}
```

L'ordinador cridar√† la primera, segona o tercera variable `fullName`?

**Nota:** Us beneficiareu molt m√©s d'aquest tutorial si proveu l'exercici vosaltres mateixos.

Si us quedeu encallats, no us desanimeu. En canvi, reviseu la lli√ß√≥ i torneu-ho a intentar.

Un cop ho heu intentat al m√†xim (nom√©s us enganyareu a vosaltres mateixos si no ho feu!), continueu per veure la resposta correcta a continuaci√≥.

### Ho Heu Encertat?

De les tres definicions de `fullName` presents en l'script anterior, l'ordinador cridar√† i retornar√† la que est√† definida en la funci√≥ `sayName()`.

La variable `fullName` de `sayName()` ser√† cridada perqu√® `sayName()` √©s l'√†mbit dins del qual l'ordinador primer trobar√† una definici√≥ de `fullName`.

Per tant, quan es crida `profile()`, el valor retornat ser√† `"Oluwa Sofe"`.

[Proveu-ho a StackBlitz](https://stackblitz.com)

**Algunes coses a tenir en compte:**

- Suposem que l'ordinador no troba la definici√≥ de `fullName` en cap dels √†mbits. En tal cas, l'ordinador retornar√† `Uncaught ReferenceError: fullName is not defined`.
- L'√†mbit global √©s sempre l'√∫ltim √†mbit de qualsevol cadena d'√†mbits de JavaScript. En altres paraules, l'√†mbit global √©s on acabaran totes les cerques.
- Un √†mbit intern (fill) t√© acc√©s al seu √†mbit pare (extern), per√≤ un √†mbit extern no t√© acc√©s al seu √†mbit fill.
  - Per exemple, en el fragment de codi anterior, `writeName()` pot accedir a codi dins de qualsevol dels seus √†mbits pare (`sayName()`, `profile()` o l'√†mbit global).
  - No obstant aix√≤, ni `sayName()`, `profile()`, ni l'√†mbit global poden accedir a cap del codi de `writeName()`.

## Revisi√≥ R√†pida de l'√Ämbit Fins Ara

L'√†mbit en JavaScript tracta tot sobre l'espai.

Aix√≠ que la propera vegada que la teva parella et cridi al seu √†mbit privat, recorda que t'est√† convidant al seu espai privat üòú!

Quan hi arribis, assegura't de preguntar-los sobre el seu millor joc l√®xic...

Per√≤ qu√® significa l√®xic, em pregunteu? Descobrim-ho a continuaci√≥.

## Qu√® Significa L√®xic?

**L√®xic** es refereix a la definici√≥ de les coses.

Qualsevol cosa relacionada amb la creaci√≥ de paraules, expressions o variables s'anomena l√®xica.

Per exemple, un joc de scrabble √©s una activitat l√®xica perqu√® es relaciona amb la creaci√≥ de paraules.

A m√©s, alg√∫ la feina del qual es relaciona amb la ling√º√≠stica (l'estudi de les lleng√ºes) t√© una carrera l√®xica.

**Nota:** Un altre nom per a un diccionari √©s **l√®xic**. En altres paraules, un l√®xic √©s un diccionari on les paraules es llisten i es defineixen.

Aix√≠ que ara que sabem qu√® signifiquen **√†mbit** i **l√®xic**, podem parlar de l'**√†mbit l√®xic**.

## Qu√® √©s l'√Ämbit L√®xic en JavaScript?

L'√†mbit l√®xic √©s l'√†rea de definici√≥ d'una expressi√≥.

En altres paraules, l'√†mbit l√®xic d'un element √©s el lloc on l'element es va crear.

**Nota:**

- Un altre nom per a l'√†mbit l√®xic √©s **√†mbit est√†tic**.
- El lloc on un element s'invoca (o es crida) no √©s necess√†riament l'√†mbit l√®xic de l'element. En canvi, l'espai de definici√≥ d'un element √©s el seu √†mbit l√®xic.

### Exemple d'√Ämbit L√®xic

Considereu el codi seg√ºent:

```javascript
// Define a variable in the global scope:
const myName = "Oluwatobi";

// Call myName variable from a function:
function getName() {
  return myName;
}
```

En el fragment de codi anterior, fixeu-vos que hem definit la variable `myName` en l'√†mbit global i l'hem cridat a la funci√≥ `getName()`.

**Pregunta:** Quin dels dos espais √©s l'√†mbit l√®xic de `myName`? √âs l'√†mbit global o l'√†mbit local de la funci√≥ `getName()`?

**Resposta:** Recordeu que l'√†mbit l√®xic significa espai de definici√≥ ‚Äî no espai d'invocaci√≥. Per tant, l'√†mbit l√®xic de `myName` √©s l'√†mbit global perqu√® hem definit `myName` en l'entorn global.

### Un Altre Exemple d'√Ämbit L√®xic

```javascript
function getName() {
  const myName = "Oluwatobi";
  return myName;
}
```

**Pregunta:** On √©s l'√†mbit l√®xic de `myName`?

**Resposta:** Observeu que hem creat i cridat `myName` dins de `getName()`. Per tant, l'√†mbit l√®xic de `myName` √©s l'entorn local de `getName()` perqu√® `getName()` √©s l'espai de definici√≥ de `myName`.

## Com Funciona l'√Ämbit L√®xic?

L'entorn de definici√≥ d'una expressi√≥ de JavaScript determina el codi que pot accedir-hi.

En altres paraules, nom√©s el codi dins de l'√†mbit l√®xic d'un element pot accedir-hi.

Per exemple, considereu el codi seg√ºent:

```javascript
// Define a function:
function showLastName() {
  const lastName = "Sofela";
  return lastName;
}

// Define another function:
function displayFullName() {
  const fullName = "Oluwatobi " + lastName;
  return fullName;
}

// Invoke displayFullName():
console.log(displayFullName());

// The invocation above will return:
Uncaught ReferenceError: lastName is not defined
```

En el fragment de codi anterior, la invocaci√≥ de `displayFullName()` va retornar un `Uncaught ReferenceError`. L'error va retornar perqu√® nom√©s el codi dins de l'√†mbit l√®xic d'un element pot accedir a l'element.

Per tant, ni la funci√≥ `displayFullName()` ni el seu codi intern poden accedir a la variable `lastName` perqu√® `lastName` est√† definida en un √†mbit diferent.

En altres paraules, l'√†mbit l√®xic de `lastName` √©s diferent del de `displayFullName()`.

L'espai de definici√≥ de `lastName` √©s `showLastName()` mentre que l'√†mbit l√®xic de `displayFullName()` √©s l'entorn global.

Ara, considereu aquest altre codi a continuaci√≥:

```javascript
function showLastName() {
  const lastName = "Sofela";
  return lastName;
}

// Define another function:
function displayFullName() {
  const fullName = "Oluwatobi " + showLastName();
  return fullName;
}

// Invoke displayFullName():
console.log(displayFullName());

// The invocation above will return:
"Oluwatobi Sofela"
```

En el fragment de codi anterior, `displayFullName()` va retornar amb √®xit `"Oluwatobi Sofela"` perqu√® `displayFullName()` i `showLastName()` estan en el mateix √†mbit l√®xic.

En altres paraules, `displayFullName()` va poder invocar `showLastName()` perqu√® les dues funcions estan definides en l'√†mbit global.

**Nota:**

- En l'exemple 2 anterior, `displayFullName()` no va obtenir acc√©s a la variable `lastName` de `showLastName()`.
- En canvi, `displayFullName()` va invocar `showLastName()` ‚Äî que despr√©s va retornar el contingut de la seva variable `lastName`.
- Una alternativa a l'√†mbit l√®xic √©s l'√†mbit din√†mic ‚Äî per√≤ rarament s'utilitza en programaci√≥. Nom√©s uns pocs llenguatges, com bash, utilitzen l'√†mbit din√†mic.

## Per Acabar

Cada vegada que escolteu **l√®xic**, penseu en **definici√≥**.

Aix√≠, l'√†mbit l√®xic d'un cotxe, variable, tel√®fon, funci√≥ o banyador es refereix a la seva regi√≥ de definici√≥.

## Visi√≥ General

Aquest article ha tractat sobre qu√® significa l'√†mbit l√®xic en JavaScript. Tamb√© hem vist per qu√® √©s un concepte de programaci√≥ important.

Gr√†cies per llegir!